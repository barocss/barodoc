---
import { DocHeader } from "./DocHeader";
import LanguageSwitcher from "./LanguageSwitcher.astro";
import config from "virtual:barodoc/config";
import { locales, defaultLocale } from "virtual:barodoc/i18n";

interface Props {
  currentLocale?: string;
}

const { currentLocale = defaultLocale } = Astro.props;
const hasMultipleLocales = locales.length > 1;

// Build locale labels from config
const localeLabels: Record<string, string> = config.i18n?.labels || {};
---

<DocHeader 
  client:load
  siteName={config.name}
  logo={config.logo}
  githubUrl={config.topbar?.github}
  hasMultipleLocales={hasMultipleLocales}
  currentLocale={currentLocale}
  localeLabels={localeLabels}
/>

{hasMultipleLocales && (
  <div class="hidden">
    <LanguageSwitcher currentLocale={currentLocale} />
  </div>
)}
